(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,a){e.exports=a(64)},49:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(25),i=a.n(s),c=a(8),l=a(9),o=a(11),u=a(10),m=a(13),d=a(12),h=a(26),p=a.n(h),f=a(20),g=a.n(f),E=g.a.initializeApp({apiKey:"AIzaSyCcqUjyTR0MhH-e5XA1GROswsJTe0uFrUs",authDomain:"write-d85e3.firebaseapp.com",databaseURL:"https://write-d85e3.firebaseio.com",projectId:"write-d85e3",storageBucket:"write-d85e3.appspot.com",messagingSenderId:"483821876508",appId:"1:483821876508:web:3a74b53d15529b71"}),v=p.a.createClass(E.database()),b=g.a.auth(),w=a(14),y=a(16),k=a(5),N=(a(49),function(e){var t=e.username;return r.a.createElement("div",{className:"menu"},r.a.createElement("h4",{className:"clickable menu__username"},r.a.createElement(w.b,{to:"/profile"},t)),r.a.createElement("h4",{className:"clickable"},r.a.createElement(w.b,{exact:!0,to:"/"},"Write")),r.a.createElement("h4",{className:"clickable"},r.a.createElement(w.b,{to:"/mailbox"},"Mailbox")),r.a.createElement("h4",{className:"clickable"},r.a.createElement(w.b,{to:"/drafts"},"Drafts")),r.a.createElement("h4",{className:"clickable"},r.a.createElement(w.b,{to:"/about"},"About")))}),x=function(e){var t=e.logOut;return r.a.createElement("div",{className:"main"},"PROFILE",r.a.createElement("h4",{className:"clickable danger",onClick:t},"Log Out"))},_=a(30),S=(a(58),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).saveDraft=function(){a.props.saveDraft(a.textInput.current.value),a.setState({isSaving:!0}),window.setTimeout(function(){a.setState({isSaving:!1}),a.textInput.current.value=""},2e3)},a.sendFlow=function(){a.setState({isSending:!0,letter:a.textInput.current.value}),window.setTimeout(function(){return a.setState({preSend:!1})},2e3)},a.sendLetter=function(e,t){a.props.send(e,t),a.setState({sent:!0}),window.setTimeout(function(){a.setState({letter:"",email:"",isSending:!1,preSend:!0,sent:!1}),a.textInput.current.value=""},2e3)},a.getEmail=function(e){a.setState({email:e.target.value})},a.state={letter:"",email:"",isSending:!1,preSend:!0,sent:!1,isSaving:!1},a.textInput=r.a.createRef(),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.letter,n=t.email,s=t.isSaving,i=t.isSending,c=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"write main"},r.a.createElement(_.a,{value:this.props.text&&this.props.text,className:"write__textarea",type:"text",onChange:this.props.onChange,autoFocus:!0,placeholder:"Write...",inputRef:this.textInput}),s&&r.a.createElement("h6",null,"Saved as draft")),r.a.createElement("div",{className:"write__menu context-menu"},r.a.createElement("h4",{className:"clickable",onClick:function(){return e.sendFlow()}},"Send"),r.a.createElement("h4",{className:"clickable",onClick:this.saveDraft},"Save as a draft"),r.a.createElement("h4",{className:"clickable write__clear danger",onClick:function(){e.props.startOver(e.textInput.current)}},"Start over"))),l=r.a.createElement("div",{className:"write main"},r.a.createElement("div",{className:"letter"},a)),o=r.a.createElement("div",{className:"write main"},r.a.createElement("div",{className:"letter"},r.a.createElement("input",{autoFocus:!0,type:"text",placeholder:"Email",onChange:function(t){return e.getEmail(t)}}),r.a.createElement("h4",null,"Who would you like to send this letter to?"),""!==this.state.email&&r.a.createElement("h6",{className:"clickable",onClick:function(){return e.sendLetter(a,n)}},"Click here to send"))),u=r.a.createElement("div",{className:"write main"},r.a.createElement("div",{className:"letter"},r.a.createElement("h4",null,"Sent!"))),m=r.a.createElement(r.a.Fragment,null,this.state.preSend?l:this.state.sent?u:o,r.a.createElement("div",{className:"write__menu context-menu"},r.a.createElement("h4",{className:"active"},"Send"),r.a.createElement("h4",{className:"clickable",onClick:this.switchView},"Save as a draft"),r.a.createElement("h4",{className:"clickable write__clear danger",onClick:function(){e.props.startOver(e.textInput.current)}}," Start over")));return i?m:c}}]),t}(n.Component)),C=function(e){return e.length>42?"".concat(e.substring(0,42),"..."):e},O=function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],a=e.getDate(),n=e.getFullYear();return"".concat(t," ").concat(a,", ").concat(n)},D=function(e){var t=e.from,a=e.date,n=e.text,s=e.onClick;return r.a.createElement("div",{className:"reccd-item clickable",onClick:s},r.a.createElement("span",{className:"reccd-item__name"},t),r.a.createElement("span",{className:"reccd-item__date"},O(new Date(a))),r.a.createElement("p",null,C(n)))},j=function(e){var t=e.name,a=e.date;return r.a.createElement("div",{className:"sent-item"},r.a.createElement("h4",{className:"sent-item__name"},t),r.a.createElement("h6",{className:"sent-item__date"},O(new Date(a))))},I=function(e){var t=e.from,a=e.date,n=e.text;return r.a.createElement("div",{className:"letter"},r.a.createElement("span",{className:"letter__name"},t),r.a.createElement("span",{className:"letter__date"},O(new Date(a))),r.a.createElement("p",{className:"letter__text"},n))},L=(a(59),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).switchView=function(){var e="reccd"===a.state.curView?"sent":"reccd";a.setState({curView:e})},a.selectLetter=function(e){a.setState({isViewing:!0,curLetter:e})},a.delLetter=function(e){a.props.delLetter(e),a.setState({isViewing:!1,curLetter:{}})},a.back=function(){a.setState({isViewing:!1})},a.state={curView:"reccd",isViewing:!1,curLetter:{}},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.curView,n=t.isViewing,s=t.curLetter,i=[];return i="reccd"===a?this.props.reccd.reverse().map(function(t,a){return r.a.createElement(D,{key:a,from:t.from,date:t.date,text:t.text,onClick:function(){return e.selectLetter(t)}})}):this.props.sent.reverse().map(function(e,t){return r.a.createElement(j,{key:t,name:e.to,date:e.date})}),n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mailbox__list main"},r.a.createElement(I,{from:s.from,date:s.date,text:s.text})),r.a.createElement("div",{className:"mailbox__menu context-menu"},r.a.createElement("h4",{className:"clickable",onClick:this.back},"Back to Mailbox"),r.a.createElement("h4",{className:"clickable danger",onClick:function(){return e.delLetter(s.key)}},"Throw away letter"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mailbox__list main"},0!==i.length?i:r.a.createElement("h4",{className:"inactive"},"No Messages")),r.a.createElement("div",{className:"mailbox__menu context-menu"},r.a.createElement("h4",{className:"".concat("reccd"===a?"active":""," clickable"),onClick:this.switchView},"Received"),r.a.createElement("h4",{className:"".concat("sent"===a?"active":""," clickable"),onClick:this.switchView},"Sent")))}}]),t}(n.Component)),W=function(e){var t=e.text,a=e.date,n=e.onClick,s=e.isCurrent;return r.a.createElement("div",{className:"drafts__draft-item clickable",onClick:n},r.a.createElement("h4",{className:"drafts__draft-item__text"},C(t)),r.a.createElement("h6",{className:"drafts__draft-item__status"},s?"Currently writing":O(new Date(a))))},V=(a(60),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).selectDraft=function(e){a.setState({isViewing:!0,curDraft:e})},a.delDraft=function(e){console.log("deleting draft"),a.props.delDraft(e),a.setState({isViewing:!1,curDraft:{}})},a.editDraft=function(){a.props.editDraft(a.state.curDraft),a.props.delDraft(a.state.curDraft.key),a.props.history.push("/")},a.back=function(){a.setState({isViewing:!1})},a.state={isViewing:!1,curDraft:{}},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.isViewing,n=t.curDraft,s=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mailbox__list main"},r.a.createElement("div",null,n.text)),r.a.createElement("div",{className:"mailbox__menu context-menu"},r.a.createElement("h4",{className:"clickable",onClick:this.back},"Back to Drafts"),r.a.createElement("h4",{className:"clickable",onClick:this.editDraft},"Edit draft"),r.a.createElement("h4",{className:"clickable danger drafts__delete",onClick:function(){return e.delDraft(n.key)}},"Throw away draft"))),i=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"drafts main"},""!==this.props.curLetter&&r.a.createElement(W,{text:this.props.curLetter,isCurrent:!0}),0!==this.props.drafts.length||""!==this.props.curLetter?this.props.drafts.map(function(t,a){return r.a.createElement(W,{text:t.text,date:t.date,key:a,onClick:function(){return e.selectDraft(t)}})}):r.a.createElement("h4",{className:"inactive"},"No Drafts")));return a?s:i}}]),t}(n.Component)),F=Object(y.d)(V),U=(a(61),function(){return r.a.createElement("div",{className:"about main"},r.a.createElement("p",{className:"about__paragraph"},"Write helps you communicate with the people you love."),r.a.createElement("p",{className:"about__paragraph"},"By bringing reflection and connection into an online letter writing space space, Write reclaims the meaning lost in digital communication."),r.a.createElement("p",{className:"about__paragraph"},"Letter writing is reflective and connecting for both the reader and writer. It\u2019s a unique opportunity to reflect on yourself, discover more about someone else, and focus on expressing yourself through writing. Physically writing a letter is time consuming and associated with insecurities like bad handwriting and poor writing skills. On the other hand, digital communication is temporary and lacks meaning. Write makes it easy to send and receive meaningful communication not intermixed with the other to-dos and logistics cluttering our email inboxes, text histories, and voicemails."),r.a.createElement("p",{className:"about__paragraph"},"To help you write letters, Write prompts you periodically with self-reflective questions to ask yourself and to ask people around you. Once you send a letter with Write, it will be delivered at a random moment within seven days after sending. When someone knows the exact moment a message was delivered and seen, an expectation for a hasty response is placed on both the sender and receiver.  By delivering letters serendipitously, Write creates a space for reflecting on the content of the letter."))}),T=a(31),A=(a(62),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).toggleNewUser=function(){a.setState(function(e){return{newUser:!e.newUser}})},a.onChange=function(e){a.setState(Object(T.a)({},e.target.name,e.target.value))},a.onEnter=function(e){if(13===e.keyCode){var t=e.target.value;"email"===e.target.name?(a.setState({emailEntered:!0,email:t}),e.target.value=""):a.state.newUser||"pass"!==e.target.name?"pass"===e.target.name?(a.setState({passEntered:!0,pass:t}),e.target.value=""):a.props.signUp(a.state.email,a.state.pass,a.state.name):a.props.logIn(a.state.email,a.state.pass)}},a.state={newUser:!1,emailEntered:!1,passEntered:!1,email:"",pass:"",name:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"Type your email to log in",onChange:this.onChange,onKeyDown:this.onEnter,name:"email",autoFocus:!0}),""!==this.state.email&&r.a.createElement("h6",null,this.state.newUser?"Welcome to Write! Press enter to continue.":"Welcome! Press enter to continue"),r.a.createElement("h6",{className:"clickable landing__sign-in-up",onClick:this.toggleNewUser},this.state.newUser?"Returning user? Click to log in":"or, click here to create an account")),t=r.a.createElement("div",null,r.a.createElement("input",{type:"password",placeholder:"Type password",onChange:this.onChange,onKeyDown:this.onEnter,name:"pass",autoFocus:!0}),""!==this.state.pass&&r.a.createElement("h6",null,"Press enter to continue")),a=r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"What is your full name?",onChange:this.onChange,onKeyDown:this.onEnter,name:"name",autoFocus:!0}),""!==this.state.name&&r.a.createElement("h6",null,"Press enter to continue"));return r.a.createElement("div",{className:"main"},r.a.createElement("p",null,"Write helps you communicate with the people you love."),r.a.createElement("p",null,"Letter writing is reflective and connecting for both the reader and writer. It\u2019s a unique opportunity to reflect, discover more about someone else, and focus on expressing yourself through writing. By bringing reflection and connection into an online letter writing space, Write reclaims the meaning lost in digital communication."),this.state.emailEntered?this.state.passEntered?a:t:e)}}]),t}(n.Component)),B=(a(63),Object(k.a)()),q="letterCollection",R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).updateLetter=function(e){var t=e.target.value;a.setState({letter:t})},a.send=function(e,t){v.fetch("users",{asArray:!0,queries:{orderByChild:"email",equalTo:t}}).then(function(n){var r={date:Date.now(),from:a.state.user.displayName,fromEmail:a.state.user.email,text:e,to:n[0].displayName,toEmail:t};v.push("letterCollection",{data:r})})},a.startOver=function(e){a.setState({letter:""}),e.value=""},a.deleteLetter=function(e){v.remove(q+"/"+e)},a.deleteDraft=function(e){v.remove("users/".concat(a.state.user.uid,"/drafts/").concat(e))},a.editDraft=function(e){a.setState({letter:e.text})},a.saveDraft=function(e){var t={date:Date.now(),text:e};v.push("users/".concat(a.state.user.uid,"/drafts"),{data:t}),a.setState({letter:""})},a.logIn=function(e,t){b.signInWithEmailAndPassword(e,t).then(function(e){a.setState({loggedIn:!0,user:e.user}),a.getData(a.state.user.email)}).catch(function(e){return console.log(e)})},a.logOut=function(){b.signOut().then(function(){a.setState({loggedIn:!1}),B.push("/")}).catch(function(e){return console.log(e)})},a.signUp=function(e,t,n){b.createUserWithEmailAndPassword(e,t).then(function(e){e.user.updateProfile({displayName:n}).then(function(){a.setState({loggedIn:!0,user:e.user}),a.getData(a.state.user.email);var t={displayName:a.state.user.displayName,email:a.state.user.email,letter:"",drafts:{}};v.post("users/".concat(a.state.user.uid),{data:t})})}).catch(function(e){return console.log(e)})},a.getData=function(){v.bindToState("letterCollection",{context:Object(m.a)(a),state:"sent",asArray:!0,queries:{orderByChild:"fromEmail",equalTo:a.state.user.email}}),v.bindToState("letterCollection",{context:Object(m.a)(a),state:"reccd",asArray:!0,queries:{orderByChild:"toEmail",equalTo:a.state.user.email}}),v.bindToState("users/".concat(a.state.user.uid,"/drafts"),{context:Object(m.a)(a),state:"drafts",asArray:!0}),a.letterRef=v.syncState("users/".concat(a.state.user.uid,"/letter"),{context:Object(m.a)(a),state:"letter"})},a.state={letter:"",loggedIn:!1,user:{},sent:[],reccd:[],drafts:[]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){v.removeBinding(this.letterRef)}},{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.drafts,s=t.letter,i=t.reccd,c=t.sent;return this.state.loggedIn?r.a.createElement(w.a,{history:B},r.a.createElement("div",{className:"app"},r.a.createElement(y.a,{exact:!0,path:"/",render:function(){return r.a.createElement(S,{text:s,onChange:e.updateLetter,saveDraft:e.saveDraft,send:e.send,startOver:e.startOver})}}),r.a.createElement(y.a,{path:"/profile",render:function(){return r.a.createElement(x,{logOut:e.logOut})}}),r.a.createElement(y.a,{path:"/mailbox",render:function(){return r.a.createElement(L,{reccd:i,sent:c,delLetter:e.deleteLetter})}}),r.a.createElement(y.a,{path:"/drafts",render:function(){return r.a.createElement(F,{curLetter:s,drafts:n,editDraft:e.editDraft,delDraft:e.deleteDraft})}}),r.a.createElement(y.a,{path:"/about",component:U}),r.a.createElement(N,{username:a.displayName}))):r.a.createElement(w.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(y.a,{path:"/",render:function(){return r.a.createElement(A,{logIn:e.logIn,signUp:e.signUp})}})))}}]),t}(n.Component);i.a.render(r.a.createElement(R,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.4e1c8332.chunk.js.map