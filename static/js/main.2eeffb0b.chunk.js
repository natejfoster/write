(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,a){e.exports=a(67)},51:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(27),s=a.n(i),c=a(6),l=a(7),o=a(9),m=a(8),u=a(13),d=a(10),h=a(28),p=a.n(h),f=a(21),g=a.n(f),E=g.a.initializeApp({apiKey:"AIzaSyCcqUjyTR0MhH-e5XA1GROswsJTe0uFrUs",authDomain:"write-d85e3.firebaseapp.com",databaseURL:"https://write-d85e3.firebaseio.com",projectId:"write-d85e3",storageBucket:"write-d85e3.appspot.com",messagingSenderId:"483821876508",appId:"1:483821876508:web:3a74b53d15529b71"}),b=p.a.createClass(E.database()),v=g.a.auth(),w=a(14),y=a(16),k=a(5),N=a(20),_=a.n(N),x=(a(51),function(e){var t=e.username;return r.a.createElement("div",{className:"menu"},r.a.createElement("h6",{className:"menu__username"},r.a.createElement(w.b,{to:"/profile",className:"clickable"},t)),r.a.createElement("h6",null,r.a.createElement(w.b,{exact:!0,to:"/",className:"clickable"},"Write")),r.a.createElement("h6",null,r.a.createElement(w.b,{to:"/mailbox",className:"clickable"},"Mailbox")),r.a.createElement("h6",null,r.a.createElement(w.b,{to:"/drafts",className:"clickable"},"Drafts")),r.a.createElement("h6",null,r.a.createElement(w.b,{to:"/about",className:"clickable"},"About")))}),D=(a(60),function(e){var t=e.logOut,a=e.email,n=e.displayName;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"main profile"},r.a.createElement("h4",{className:"profile__name"},n),r.a.createElement("h4",{className:"profile__email"},a)),r.a.createElement("div",{className:"context-menu"},r.a.createElement("h6",{className:"clickable danger",onClick:t},"Log Out")))}),S=a(32),C=function(e){return e.length>42?"".concat(e.substring(0,42),"..."):e},O=function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],a=e.getDate(),n=e.getFullYear();return"".concat(t," ").concat(a,", ").concat(n)},j=(a(61),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).saveDraft=function(){a.props.saveDraft(a.textInput.current.value),a.setState({isSaving:!0}),window.setTimeout(function(){a.setState({isSaving:!1}),a.textInput.current.value=""},2e3)},a.sendFlow=function(){a.setState({isSending:!0,letter:a.textInput.current.value}),window.setTimeout(function(){return a.setState({preSend:!1})},2e3)},a.sendLetter=function(e,t){a.props.send(e,t),a.setState({sent:!0}),window.setTimeout(function(){a.setState({letter:"",email:"",isSending:!1,preSend:!0,sent:!1}),a.textInput.current.value=""},2e3)},a.getEmail=function(e){a.setState({email:e.target.value})},a.cancel=function(){a.setState({email:"",isSending:!1,preSend:!0,sent:!1},function(){a.textInput.current.focus()})},a.initStartOver=function(){a.setState({isDeleting:!0})},a.startOver=function(e){a.props.startOver(e),a.setState({isDeleting:!1})},a.cancelStartOver=function(){a.setState({isDeleting:!1})},a.state={letter:"",email:"",isSending:!1,preSend:!0,sent:!1,isSaving:!1,isDeleting:!1},a.textInput=r.a.createRef(),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.letter,n=t.email,i=t.isSaving,s=t.isSending,c=t.isDeleting,l=""!==this.props.text,o=r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{className:"clickable space--between",onClick:this.cancelStartOver},"Don't start over"),r.a.createElement("h6",{className:"clickable danger",onClick:function(){return e.startOver(e.textInput.current)}},"Click to start over")),m=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"write main"},r.a.createElement(S.a,{value:this.props.text&&this.props.text,className:"write__textarea",type:"text",onChange:this.props.onChange,autoFocus:!0,placeholder:"Write",inputRef:this.textInput}),i&&r.a.createElement("h6",{className:"write__saved"},"Saved as draft")),l&&r.a.createElement("div",{className:"write__menu context-menu"},r.a.createElement("h6",{className:"clickable",onClick:function(){return e.sendFlow()}},"Send"),r.a.createElement("h6",{className:"clickable",onClick:this.saveDraft},"Save as a draft"),c?o:r.a.createElement("h6",{className:"clickable write__clear danger",onClick:this.initStartOver},"Start over"))),u=r.a.createElement("div",{className:"write main"},r.a.createElement("div",{className:"write__send letter--wrapper"},r.a.createElement("p",null,a))),d=r.a.createElement("div",{className:"write main"},r.a.createElement("div",{className:"write__send"},r.a.createElement("input",{autoFocus:!0,type:"text",placeholder:"Email",onChange:function(t){return e.getEmail(t)}}),r.a.createElement("h4",null,"Who would you like to send this letter to?"),""!==this.state.email&&r.a.createElement("h6",{className:"clickable",onClick:function(){return e.sendLetter(a,n)}},"Click here to send"))),h=r.a.createElement("div",{className:"write main"},r.a.createElement("div",{className:"write__send"},r.a.createElement("h4",null,"Sent!"))),p=r.a.createElement(r.a.Fragment,null,this.state.preSend?u:this.state.sent?h:d,r.a.createElement("div",{className:"write__menu context-menu"},r.a.createElement("h6",{className:"active"},"Send"),r.a.createElement("h6",{className:"clickable danger write__cancel",onClick:this.cancel},"Cancel")));return s?p:m}}]),t}(n.Component)),I=a(23),L=function(e){var t=e.from,a=e.date,n=e.text,i=e.onClick;return r.a.createElement("div",{className:"reccd-item clickable",onClick:i},r.a.createElement("span",{className:"reccd-item__name"},t),r.a.createElement("span",{className:"reccd-item__date"},O(new Date(a))),r.a.createElement("p",null,C(n)))},W=function(e){var t=e.name,a=e.date;return r.a.createElement("div",{className:"sent-item"},r.a.createElement("h4",{className:"sent-item__name"},t),r.a.createElement("h6",{className:"sent-item__date"},O(new Date(a))))},F=function(e){var t=e.from,a=e.date,n=e.fromEmail,i=e.text;return r.a.createElement("div",{className:"letter letter--wrapper"},r.a.createElement("span",{className:"letter__name"},t),r.a.createElement("span",{className:"letter__date"},O(new Date(a))),r.a.createElement("h6",{className:"letter__email"},n),r.a.createElement("p",{className:"letter__text"},i))},U=(a(62),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).switchView=function(e){var t=e.target.getAttribute("name");a.setState({curView:t})},a.selectLetter=function(e){console.log(e),a.setState({isViewing:!0,curLetter:e})},a.initDelete=function(){a.setState({isDeleting:!0})},a.delLetter=function(e){a.props.delLetter(e),a.setState({isViewing:!1,isDeleting:!1,curLetter:{}})},a.back=function(){a.setState({isViewing:!1})},a.cancelDelete=function(){a.setState({isDeleting:!1})},a.state={curView:"reccd",isViewing:!1,isDeleting:!1,curLetter:{}},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.curView,n=t.isViewing,i=t.isDeleting,s=t.curLetter,c=[],l=Object(I.a)(this.props.sent),o=Object(I.a)(this.props.reccd);c="reccd"===a?o.reverse().map(function(t,a){return r.a.createElement(L,{key:a,from:t.from,date:t.date,text:t.text,onClick:function(){return e.selectLetter(t)}})}):r.a.createElement("div",{className:"mailbox__sent"},l.reverse().map(function(e,t){return r.a.createElement(W,{key:t,name:e.to,date:e.date})}));var m=r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{className:"clickable space--between",onClick:this.cancelDelete},"Don't throw away"),r.a.createElement("h6",{className:"clickable danger",onClick:function(){return e.delLetter(s.key)}},"Click to throw away"));return n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mailbox__list main"},r.a.createElement(F,{from:s.from,date:s.date,fromEmail:s.fromEmail,text:s.text})),r.a.createElement("div",{className:"mailbox__menu context-menu"},r.a.createElement("h6",{className:"clickable",onClick:this.back},"Back to Mailbox"),i?m:r.a.createElement("h6",{className:"clickable danger space--between",onClick:this.initDelete},"Throw away letter"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mailbox__list main"},0!==c.length?c:r.a.createElement("h4",{className:"inactive"},"No Messages")),r.a.createElement("div",{className:"mailbox__menu context-menu"},r.a.createElement("h6",{name:"reccd",className:"".concat("reccd"===a?"active":""," clickable"),onClick:function(t){return e.switchView(t)}},"Received"),r.a.createElement("h6",{name:"sent",className:"".concat("sent"===a?"active":""," clickable"),onClick:function(t){return e.switchView(t)}},"Sent")))}}]),t}(n.Component)),V=function(e){var t=e.text,a=e.date,n=e.onClick,i=e.isCurrent;return r.a.createElement("div",{className:"drafts__draft-item clickable",onClick:n},r.a.createElement("h4",{className:"drafts__draft-item__text"},C(t)),r.a.createElement("h6",{className:"drafts__draft-item__status"},i?"Currently writing":O(new Date(a))))},T=(a(63),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).selectDraft=function(e){a.setState({isViewing:!0,curDraft:e})},a.initDelete=function(){a.setState({isDeleting:!0})},a.delDraft=function(e){a.props.delDraft(e),a.setState({isViewing:!1,isDeleting:!1,curDraft:{}})},a.cancelDelete=function(){a.setState({isDeleting:!1})},a.editDraft=function(){a.props.editDraft(a.state.curDraft),a.props.delDraft(a.state.curDraft.key),a.props.history.push("/")},a.back=function(){a.setState({isViewing:!1})},a.state={isViewing:!1,isDeleting:!1,curDraft:{}},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.isViewing,n=t.isDeleting,i=t.curDraft,s=r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{className:"clickable space--between",onClick:this.cancelDelete},"Don't throw away"),r.a.createElement("h6",{className:"clickable danger",onClick:function(){return e.delDraft(i.key)}},"Click to throw away")),c=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"drafts main"},r.a.createElement("div",null,i.text)),r.a.createElement("div",{className:"drafts__menu context-menu"},r.a.createElement("h6",{className:"clickable",onClick:this.back},"Back to Drafts"),r.a.createElement("h6",{className:"clickable",onClick:this.editDraft},"Edit draft"),n?s:r.a.createElement("h6",{className:"clickable danger drafts__delete space--between",onClick:this.initDelete},"Throw away draft"))),l=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"drafts main"},""!==this.props.curLetter&&r.a.createElement(V,{text:this.props.curLetter,isCurrent:!0}),0!==this.props.drafts.length||""!==this.props.curLetter?this.props.drafts.map(function(t,a){return r.a.createElement(V,{text:t.text,date:t.date,key:a,onClick:function(){return e.selectDraft(t)}})}):r.a.createElement("h4",{className:"inactive"},"No Drafts")));return a?c:l}}]),t}(n.Component)),P=Object(y.d)(T),A=(a(64),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={onPrivacy:!1},a.switchView=function(){console.log("switching"),a.setState({onPrivacy:!a.state.onPrivacy})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"about main"},r.a.createElement("p",{className:"about__paragraph"},"Write helps you communicate with the people you love."),r.a.createElement("p",{className:"about__paragraph"},"By bringing reflection, discovery, and expression together in an online space, Write reclaims the meaning and clarity lost in digital communication."),r.a.createElement("p",{className:"about__paragraph"},"Letter writing is a unique opportunity to reflect, discover, and express. Physically writing a letter is time consuming and associated with insecurities like bad handwriting and poor writing skills. On the other hand, digital communication is temporary and lacks meaning. Write makes it easy to send and receive meaningful communication not intermixed with the other to-dos and logistics cluttering our email inboxes, text histories, and voicemails."),r.a.createElement("p",{className:"about__paragraph"},"If you\u2019re feeling stuck while writing, Write prompts you with self-reflective questions to ask yourself and your loved ones. Once you send a letter with Write, it will be delivered at a random moment within seven days after sending. When someone knows the exact moment a message was delivered and seen, an expectation for a hasty response is placed on both the sender and receiver. By delivering letters serendipitously, Write creates a space for reflecting on the content of the letter."),r.a.createElement("p",{className:"about_paragraph"},"Write is a project designed by ",r.a.createElement("span",{className:"about__credit clickable"},r.a.createElement("a",{target:"_blank",href:"https://mattwright.design"},"Matt Wright"))," and developed by ",r.a.createElement("span",{className:"about__credit clickable"},r.a.createElement("a",{target:"_blank",href:"https://www.nathanjfoster.com"},"Nathan Foster")),".")),r.a.createElement("div",{className:"context-menu"}));r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"about main"},r.a.createElement("p",{className:"about__paragraph"},"This is some info about the privacy stuff yada yada yada"),r.a.createElement("p",{className:"about__paragraph"},"Write is built using blah blah blah")),r.a.createElement("div",{className:"context-menu"},r.a.createElement("h6",{className:"clickable",onClick:this.switchView},"Back to about")));return e}}]),t}(n.Component)),B=a(33),q=(a(65),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).toggleNewUser=function(){a.setState(function(e){return{newUser:!e.newUser}}),a.textInput.current.focus()},a.onChange=function(e){a.setState(Object(B.a)({},e.target.name,e.target.value))},a.onEnter=function(e){if(13===e.keyCode){var t=e.target.value;"email"===e.target.name?(a.setState({emailEntered:!0,email:t}),e.target.value=""):a.state.newUser||"pass"!==e.target.name?"pass"===e.target.name?(a.setState({passEntered:!0,pass:t}),e.target.value=""):a.props.signUp(a.state.email,a.state.pass,a.state.name):a.props.logIn(a.state.email,a.state.pass)}},a.back=function(){a.setState({newUser:!1,emailEntered:!1,passEntered:!1,email:"",pass:"",name:""},function(){return a.textInput.current.focus()})},a.state={newUser:!1,emailEntered:!1,passEntered:!1,email:"",pass:"",name:""},a.textInput=r.a.createRef(),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:this.state.newUser?"Type your email to sign up":"Type your email to log in",onChange:this.onChange,onKeyDown:this.onEnter,name:"email",autoFocus:!0,ref:this.textInput}),""!==this.state.email&&r.a.createElement("h6",null,this.state.newUser?"Welcome to Write! Press enter to continue.":"Welcome! Press enter to continue"),r.a.createElement("h6",{className:"clickable landing__sign-in-up",onClick:this.toggleNewUser},this.state.newUser?"Returning user? Click to log in":"or, click here to create an account")),t=r.a.createElement("h6",{className:"inactive"},"Passwords must contain at least one: Uppercase Letter, Lowercase Letter, Number, and Symbol"),a=r.a.createElement("div",null,r.a.createElement("input",{type:"password",placeholder:"Type Password",onChange:this.onChange,onKeyDown:this.onEnter,name:"pass",autoFocus:!0}),this.state.newUser&&t,""!==this.state.pass&&r.a.createElement("h6",null,this.state.newUser?"Press enter to sign up":"Press enter to sign in")),n=r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"What is your full name?",onChange:this.onChange,onKeyDown:this.onEnter,name:"name",autoFocus:!0}),""!==this.state.name&&r.a.createElement("h6",null,"Press enter to continue")),i=r.a.createElement("div",{className:"menu landing__menu"},r.a.createElement("h6",{className:"clickable",onClick:this.back},"Back to home"));return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{query:"(max-device-width: 768px)"},r.a.createElement("div",{className:"main landing"},r.a.createElement("p",null,"Write is an experience best enjoyed on a larger screen. "),r.a.createElement("p",null,"Visit soon!"),r.a.createElement("p",null,"What is Write?",r.a.createElement("br",null),"By bringing reflection and connection into an online letter writing space space, Write reclaims the meaning lost in digital communication."),r.a.createElement("p",null,"Letter writing is reflective and connecting for both the reader and writer. It\u2019s a unique opportunity to reflect on yourself, discover more about someone else, and focus on expressing yourself through writing. Physically writing a letter is time consuming and associated with insecurities like bad handwriting and poor writing skills. On the other hand, digital communication is temporary and lacks meaning. Write makes it easy to send and receive meaningful communication not intermixed with the other to-dos and logistics cluttering our email inboxes, text histories, and voicemails."))),r.a.createElement(_.a,{query:"(min-device-width: 769px)"},r.a.createElement("div",{className:"main landing"},r.a.createElement("p",null,"Write helps you communicate with the people you love."),r.a.createElement("p",null,"By bringing reflection, discovery, and expression together in an online space, Write reclaims the meaning and clarity lost in digital communication."),this.state.emailEntered?this.state.passEntered?n:a:e),this.state.emailEntered&&i))}}]),t}(n.Component)),R=(a(66),Object(k.a)()),M="letterCollection",J=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).updateLetter=function(e){var t=e.target.value;a.setState({letter:t})},a.send=function(e,t){b.fetch("users",{asArray:!0,queries:{orderByChild:"email",equalTo:t}}).then(function(n){var r={date:Date.now(),from:a.state.user.displayName,fromEmail:a.state.user.email,text:e,to:n[0].displayName,toEmail:t};b.push("letterCollection",{data:r}).then(a.setState({letter:""}))})},a.startOver=function(e){a.setState({letter:""}),e.value="",e.focus()},a.deleteLetter=function(e){b.remove(M+"/"+e)},a.deleteDraft=function(e){b.remove("users/".concat(a.state.user.uid,"/drafts/").concat(e))},a.editDraft=function(e){a.setState({letter:e.text})},a.saveDraft=function(e){var t={date:Date.now(),text:e};b.push("users/".concat(a.state.user.uid,"/drafts"),{data:t}),a.setState({letter:""})},a.logIn=function(e,t){v.signInWithEmailAndPassword(e,t).then(function(e){a.setState({loggedIn:!0,user:e.user}),a.getData(a.state.user.email)}).catch(function(e){return console.log(e)})},a.logOut=function(){v.signOut().then(function(){a.setState({loggedIn:!1}),R.push("/")}).catch(function(e){return console.log(e)})},a.signUp=function(e,t,n){v.createUserWithEmailAndPassword(e,t).then(function(e){e.user.updateProfile({displayName:n}).then(function(){a.setState({loggedIn:!0,user:e.user}),a.getData(a.state.user.email);var t={displayName:a.state.user.displayName,email:a.state.user.email,letter:"",drafts:{}};b.post("users/".concat(a.state.user.uid),{data:t})})}).catch(function(e){return console.log(e)})},a.getData=function(){b.bindToState("letterCollection",{context:Object(u.a)(a),state:"sent",asArray:!0,queries:{orderByChild:"fromEmail",equalTo:a.state.user.email}}),b.bindToState("letterCollection",{context:Object(u.a)(a),state:"reccd",asArray:!0,queries:{orderByChild:"toEmail",equalTo:a.state.user.email}}),b.bindToState("users/".concat(a.state.user.uid,"/drafts"),{context:Object(u.a)(a),state:"drafts",asArray:!0}),a.letterRef=b.syncState("users/".concat(a.state.user.uid,"/letter"),{context:Object(u.a)(a),state:"letter"})},a.state={letter:"",loggedIn:!1,user:{},sent:[],reccd:[],drafts:[]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){b.removeBinding(this.letterRef)}},{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.drafts,i=t.letter,s=t.reccd,c=t.sent;return this.state.loggedIn?r.a.createElement(w.a,{history:R},r.a.createElement("div",{className:"app"},r.a.createElement(y.a,{exact:!0,path:"/",render:function(){return r.a.createElement(j,{text:i,onChange:e.updateLetter,saveDraft:e.saveDraft,send:e.send,startOver:e.startOver})}}),r.a.createElement(y.a,{path:"/profile",render:function(){return r.a.createElement(D,{logOut:e.logOut,email:a.email,displayName:a.displayName})}}),r.a.createElement(y.a,{path:"/mailbox",render:function(){return r.a.createElement(U,{reccd:s,sent:c,delLetter:e.deleteLetter})}}),r.a.createElement(y.a,{path:"/drafts",render:function(){return r.a.createElement(P,{curLetter:i,drafts:n,editDraft:e.editDraft,delDraft:e.deleteDraft})}}),r.a.createElement(y.a,{path:"/about",component:A}),r.a.createElement(x,{username:a.displayName}))):r.a.createElement(w.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(y.a,{path:"/",render:function(){return r.a.createElement(q,{logIn:e.logIn,signUp:e.signUp})}})))}}]),t}(n.Component);s.a.render(r.a.createElement(J,null),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.2eeffb0b.chunk.js.map