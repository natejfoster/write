(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,a){e.exports=a(64)},49:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(25),c=a.n(s),l=a(8),i=a(9),o=a(11),m=a(10),u=a(14),d=a(12),h=a(26),p=a.n(h),f=a(20),E=a.n(f),g=E.a.initializeApp({apiKey:"AIzaSyCcqUjyTR0MhH-e5XA1GROswsJTe0uFrUs",authDomain:"write-d85e3.firebaseapp.com",databaseURL:"https://write-d85e3.firebaseio.com",projectId:"write-d85e3",storageBucket:"write-d85e3.appspot.com",messagingSenderId:"483821876508",appId:"1:483821876508:web:3a74b53d15529b71"}),b=p.a.createClass(g.database()),v=E.a.auth(),w=a(13),y=a(16),N=a(5),k=(a(49),function(e){var t=e.username;return r.a.createElement("div",{className:"menu"},r.a.createElement("h4",{className:"clickable menu__username"},r.a.createElement(w.b,{to:"/profile"},t)),r.a.createElement("h4",{className:"clickable"},r.a.createElement(w.b,{exact:!0,to:"/"},"Write")),r.a.createElement("h4",{className:"clickable"},r.a.createElement(w.b,{to:"/mailbox"},"Mailbox")),r.a.createElement("h4",{className:"clickable"},r.a.createElement(w.b,{to:"/drafts"},"Drafts")),r.a.createElement("h4",{className:"clickable"},r.a.createElement(w.b,{to:"/about"},"About")))}),_=function(e){var t=e.logOut;return r.a.createElement("div",{className:"main"},"PROFILE",r.a.createElement("h4",{className:"clickable danger",onClick:t},"Log Out"))},x=a(30),C=(a(58),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).sendFlow=function(){a.setState({isSending:!0,letter:a.textInput.current.value}),window.setTimeout(function(){return a.setState({preSend:!1})},3e3)},a.sendLetter=function(e,t){a.props.send(e,t),a.setState({sent:!0}),window.setTimeout(function(){a.setState({letter:"",email:"",isSending:!1,preSend:!0,sent:!1}),a.textInput.current.value=""},6e3)},a.getEmail=function(e){a.setState({email:e.target.value})},a.state={letter:"",email:"",isSending:!1,preSend:!0,sent:!1},a.textInput=r.a.createRef(),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.letter,n=t.email,s=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"write main"},r.a.createElement(x.a,{className:"write__textarea",type:"text",onChange:this.props.onChange,autoFocus:!0,placeholder:"Write...",inputRef:this.textInput})),r.a.createElement("div",{className:"write__menu context-menu"},r.a.createElement("h4",{className:"clickable",onClick:function(){return e.sendFlow()}},"Send"),r.a.createElement("h4",{className:"clickable"},"Save as a draft"),r.a.createElement("h4",{className:"clickable write__clear danger",onClick:function(){e.props.startOver(e.textInput.current)}},"Start over"))),c=r.a.createElement("div",{className:"write main"},r.a.createElement("div",{className:"letter"},a)),l=r.a.createElement("div",{className:"write main"},r.a.createElement("div",{className:"letter"},r.a.createElement("input",{autoFocus:!0,type:"text",placeholder:"Email",onChange:function(t){return e.getEmail(t)}}),r.a.createElement("h4",null,"Who would you like to send this letter to?"),""!==this.state.email&&r.a.createElement("h6",{className:"clickable",onClick:function(){return e.sendLetter(a,n)}},"Click here to send"))),i=r.a.createElement("div",{className:"write main"},r.a.createElement("div",{className:"letter"},r.a.createElement("h4",null,"Sent!"))),o=r.a.createElement(r.a.Fragment,null,this.state.preSend?c:this.state.sent?i:l,r.a.createElement("div",{className:"write__menu context-menu"},r.a.createElement("h4",{className:"active"},"Send"),r.a.createElement("h4",{className:"clickable",onClick:this.switchView},"Save as a draft"),r.a.createElement("h4",{className:"clickable write__clear danger",onClick:function(){e.props.startOver(e.textInput.current)}}," Start over")));return this.state.isSending?o:s}}]),t}(n.Component)),O=function(e){return e.length>42?"".concat(e.substring(0,42),"..."):e},S=function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],a=e.getDate(),n=e.getFullYear();return"".concat(t," ").concat(a,", ").concat(n)},j=function(e){var t=e.from,a=e.date,n=e.text,s=e.onClick;return r.a.createElement("div",{className:"reccd-item clickable",onClick:s},r.a.createElement("span",{className:"reccd-item__name"},t),r.a.createElement("span",{className:"reccd-item__date"},S(new Date(a))),r.a.createElement("p",null,O(n)))},I=function(e){var t=e.name,a=e.date;return r.a.createElement("div",{className:"sent-item"},r.a.createElement("h4",{className:"sent-item__name"},t),r.a.createElement("h6",{className:"sent-item__date"},S(new Date(a))))},L=function(e){var t=e.from,a=e.date,n=e.text;return r.a.createElement("div",{className:"letter"},r.a.createElement("span",{className:"letter__name"},t),r.a.createElement("span",{className:"letter__date"},S(new Date(a))),r.a.createElement("p",{className:"letter__text"},n))},W=(a(59),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).switchView=function(){var e="reccd"===a.state.curView?"sent":"reccd";a.setState({curView:e})},a.selectLetter=function(e){a.setState({isViewing:!0,curLetter:e})},a.delLetter=function(e){a.props.delLetter(e),a.setState({isViewing:!1,curLetter:{}})},a.back=function(){a.setState({isViewing:!1})},a.state={curView:"reccd",isViewing:!1,curLetter:{}},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.curView,n=t.isViewing,s=t.curLetter,c=[];return c="reccd"===a?this.props.reccd.reverse().map(function(t,a){return r.a.createElement(j,{key:a,from:t.from,date:t.date,text:t.text,onClick:function(){return e.selectLetter(t)}})}):this.props.sent.reverse().map(function(e,t){return r.a.createElement(I,{key:t,name:e.to,date:e.date})}),n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mailbox__list main"},r.a.createElement(L,{from:s.from,date:s.date,text:s.text})),r.a.createElement("div",{className:"mailbox__menu context-menu"},r.a.createElement("h4",{className:"clickable",onClick:this.back},"Back to Mailbox"),r.a.createElement("h4",{className:"clickable danger",onClick:function(){return e.delLetter(s.key)}},"Throw away letter"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mailbox__list main"},c),r.a.createElement("div",{className:"mailbox__menu context-menu"},r.a.createElement("h4",{className:"".concat("reccd"===a?"active":""," clickable"),onClick:this.switchView},"Received"),r.a.createElement("h4",{className:"".concat("sent"===a?"active":""," clickable"),onClick:this.switchView},"Sent")))}}]),t}(n.Component)),D=function(e){var t=e.text,a=e.date;return r.a.createElement("div",{className:"drafts__draft-item clickable"},r.a.createElement("h4",{className:"drafts__draft-item__text"},t),r.a.createElement("h6",{className:"drafts__draft-item__status"},a))},A=(a(60),[{from:"Ava Davis",to:"Paul",date:"May 14, 2019",text:"Hey, Ava! It\u2019s me, Emma again. I hope your..."},{from:"Logan Miller",to:"Phillip",date:"May 1, 2019",text:"Consider all this; and then turn to the green... "},{from:"Ava Davis",to:"Saul",date:"March 23, 2019",text:"Talk not to me of blasphemy, man; I'd strike the.. "},{from:"Ava Davis",to:"Judas",date:"March 15, 2019",text:"And even if he for ever flies within the gorge..."},{from:"Logan Miller",to:"Peter",date:"January 21, 2019",text:"And even if he for ever flies within the gorge..."},{from:"Charlotte Jones",to:"Paul",date:"December 25, 2018",text:"It's the easiest thing in the world for a man to..."}]),U=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={drafts:A},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"drafts main"},this.state.drafts.map(function(e,t){return r.a.createElement(D,{text:O(e.text),date:e.date,key:t})}))}}]),t}(n.Component),F=(a(61),function(){return r.a.createElement("div",{className:"about main"},r.a.createElement("p",{className:"about__paragraph"},"Day after day we\u2019re barraged by notifications and to-dos. Write is here to relieve the burden that technology places on our lives."),r.a.createElement("p",{className:"about__paragraph"},"Write is a place to breathe, think deeply, and communicate with the ones you love."),r.a.createElement("p",{className:"about__paragraph"},"When you send a letter through Write, it is delivered at a random point within seven days after clicking the send button. Many digital communication methods let us know when the other person receives something, and all digital communication methods send things immediately. This creates a burden on both parties\u2014a burden to read quickly and reply promptly. Write isn\u2019t supposed to be burdensome."),r.a.createElement("p",{className:"about__paragraph"},"Write is a project designed by Matt Wright and",r.a.createElement("br",null),"developed by Nathan Foster."),r.a.createElement("p",{className:"about__paragraph"},"Want to chat? Send Matt an email at",r.a.createElement("br",null),"matt.wright.matt@gmail.com."))}),M=a(31),P=(a(62),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).toggleNewUser=function(){a.setState(function(e){return{newUser:!e.newUser}})},a.onChange=function(e){a.setState(Object(M.a)({},e.target.name,e.target.value))},a.onEnter=function(e){if(13===e.keyCode){var t=e.target.value;"email"===e.target.name?(a.setState({emailEntered:!0,email:t}),e.target.value=""):a.state.newUser||"pass"!==e.target.name?"pass"===e.target.name?(a.setState({passEntered:!0,pass:t}),e.target.value=""):a.props.signUp(a.state.email,a.state.pass,a.state.name):a.props.logIn(a.state.email,a.state.pass)}},a.state={newUser:!1,emailEntered:!1,passEntered:!1,email:"",pass:"",name:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=r.a.createElement("div",{className:"main"},r.a.createElement("p",null,"Day after day we\u2019re barraged by notifications and to-dos. Write is here to relieve the burden that technology places on our lives."),r.a.createElement("p",null,"Write is a place to breathe, think deeply, and communicate with the ones you love."),r.a.createElement("input",{type:"text",placeholder:"Ready to Write? Enter your email here",onChange:this.onChange,onKeyDown:this.onEnter,name:"email",autoFocus:!0}),""!==this.state.email&&r.a.createElement("h6",null,this.state.newUser?"Welcome to Write Press enter to continue.":"Press enter to continue"),r.a.createElement("h6",{className:"clickable landing__sign-in-up",onClick:this.toggleNewUser},this.state.newUser?"Returning user? Click to log in":"New user? Click to sign up")),t=r.a.createElement("div",{className:"main"},r.a.createElement("input",{type:"password",placeholder:"Please enter your password",onChange:this.onChange,onKeyDown:this.onEnter,name:"pass",autoFocus:!0}),""!==this.state.pass&&r.a.createElement("h6",null,"Press enter to continue")),a=r.a.createElement("div",{className:"main"},r.a.createElement("input",{type:"text",placeholder:"What is your full name?",onChange:this.onChange,onKeyDown:this.onEnter,name:"name",autoFocus:!0}),""!==this.state.name&&r.a.createElement("h6",null,"Press enter to continue"));return r.a.createElement("div",null,this.state.emailEntered?this.state.passEntered?a:t:e)}}]),t}(n.Component)),V=(a(63),Object(N.a)()),T="letterCollection",R=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).updateLetter=function(e){var t=e.target.value;a.setState({letters:t})},a.send=function(e,t){b.fetch("users",{asArray:!0,queries:{orderByChild:"email",equalTo:t}}).then(function(n){var r={date:Date.now(),from:a.state.user.displayName,fromEmail:a.state.user.email,text:e,to:n[0].displayName,toEmail:t};b.push("letterCollection",{data:r})})},a.startOver=function(e){a.setState({letters:""}),e.value=""},a.deleteLetter=function(e){b.remove(T+"/"+e)},a.logIn=function(e,t){v.signInWithEmailAndPassword(e,t).then(function(e){a.setState({loggedIn:!0,user:e.user}),a.getData(a.state.user.email)}).catch(function(e){return console.log(e)})},a.logOut=function(){v.signOut().then(function(){a.setState({loggedIn:!1}),V.push("/")}).catch(function(e){return console.log(e)})},a.signUp=function(e,t,n){v.createUserWithEmailAndPassword(e,t).then(function(e){e.user.updateProfile({displayName:n}).then(function(){a.setState({loggedIn:!0,user:e.user}),a.getData(a.state.user.email);var t={displayName:a.state.user.displayName,email:a.state.user.email};b.post("users/".concat(a.state.user.uid),{data:t})})}).catch(function(e){return console.log(e)})},a.getData=function(){b.bindToState("letterCollection",{context:Object(u.a)(a),state:"sent",asArray:!0,queries:{orderByChild:"fromEmail",equalTo:a.state.user.email}}),b.bindToState("letterCollection",{context:Object(u.a)(a),state:"reccd",asArray:!0,queries:{orderByChild:"toEmail",equalTo:a.state.user.email}})},a.state={letters:"",loggedIn:!1,user:{},sent:[],reccd:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.lettersRef=b.syncState("letters",{context:this,state:"letters"})}},{key:"componentWillUnmount",value:function(){b.removeBinding(this.lettersRef)}},{key:"render",value:function(){var e=this;return this.state.loggedIn?r.a.createElement(w.a,{history:V},r.a.createElement("div",{className:"app"},r.a.createElement(y.a,{exact:!0,path:"/",render:function(){return r.a.createElement(C,{onChange:e.updateLetter,send:e.send,startOver:e.startOver})}}),r.a.createElement(y.a,{path:"/profile",render:function(){return r.a.createElement(_,{logOut:e.logOut})}}),r.a.createElement(y.a,{path:"/mailbox",render:function(){return r.a.createElement(W,{reccd:e.state.reccd,sent:e.state.sent,delLetter:e.deleteLetter})}}),r.a.createElement(y.a,{path:"/drafts",component:U}),r.a.createElement(y.a,{path:"/about",component:F}),r.a.createElement(k,{username:this.state.user.displayName}))):r.a.createElement(w.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(y.a,{path:"/",render:function(){return r.a.createElement(P,{logIn:e.logIn,signUp:e.signUp})}})))}}]),t}(n.Component);c.a.render(r.a.createElement(R,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.7bfb2c42.chunk.js.map